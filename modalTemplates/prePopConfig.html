<div>
  <!--<div ng-controller="newResourceCtrl">-->

  <div class="modal-header">
    <div class="row">
      <div class="col-md-8 col-sm-8">
        <h3 class="modal-title">
          Prepopulation config
        </h3>
      </div>


      <div class="col-md-4 col-sm-4">
        <button class="btn btn-primary pull-right" ng-click="save()">Save config</button>
        <button class="btn btn-link pull-right" ng-click="$dismiss()">Close</button>

      </div>
    </div>

  </div>
  <div class="modal-body">

    <uib-tabset>
      <uib-tab heading="Config">
        <table class="table-bordered table">
          <tr>
            <td>Data Server</td>
            <td><input class="form-control" ng-model="prePopConfig.dataServer"></td>
          </tr>

          <tr>
            <td>Patient reference</td>
            <td><input class="form-control" ng-model="prePopConfig.patient.reference"></td>
          </tr>

          <tr>
            <td>Practitioner reference</td>
            <td><input class="form-control" ng-model="prePopConfig.practitioner.reference"></td>
          </tr>

        </table>



      </uib-tab>

      <uib-tab heading="Upload resource">
        <strong>Server: {{prePopConfig.dataServer}}</strong>
        <br/>
        <textarea class="form-control" rows="10" ng-model="input.resource">

        </textarea>

        <div>
          <div class="pull-right btn btn-link" ng-click="upload()">Upload</div>
        </div>

      </uib-tab>

      <uib-tab heading="Query server">
        <strong>Server: {{prePopConfig.dataServer}}</strong>
        <br/> <br/>
        <div class="row">
          <div class="col-md-6">
            <input class="form-control" ng-model="input.query"
                   placeholder="Query - eg Patient/sample"/>
          </div>
          <div class="col-md-2">
            <button class="btn-link btn"  ng-click="doQuery(input.query)">Execute</button>
          </div>
        </div>

        <div ng-show = "responseJson.resourceType == 'Bundle'" class="row">
          <div class="col-md-3">
            <div class="list-group">
              <div ng-class="{'list-group-item':true,listItemSelected:entry==input.selectedEntry}"
                   style="cursor: pointer"
                   ng-click="input.selectedEntry = entry"
                   ng-repeat="entry in responseJson.entry">
                {{entry.resource.resourceType}}/{{entry.resource.id}}
              </div>
            </div>
          </div>
          <div class="col-md-9">

            <pre ng-show="input.selectedEntry">{{input.selectedEntry | json}}</pre>

            <pre ng-show="qryError">{{qryError | json}}</pre>
          </div>
        </div>



        <div ng-show = "responseJson.resourceType !== 'Bundle'" class="row">

          <div class="col-md-12">
            <pre ng-show="responseJson">{{responseJson | json}}</pre>
            <pre ng-show="qryError">{{qryError | json}}</pre>
          </div>
        </div>



      </uib-tab>

      <uib-tab heading="Config Json">
        <pre>{{prePopConfig | json}}</pre>
      </uib-tab>
    </uib-tabset>







  </div>
  <div class="modal-header">

    {{displayQuery}}
  </div>
</div>